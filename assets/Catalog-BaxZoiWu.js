import{_ as w,k as R,l as V,c as o,o as l,d as s,b as v,F as g,r as p,i as m,v as h,t as c,n as f,f as _,m as x,h as P,p as N,g as U,q as T,e as B,j as I,w as y,a as M}from"./index-F71AAdkV.js";const L={name:"Catalog",data(){return{currentPage:1,sortOption:"newest",priceRange:[0,2e9],selectedFilters:{productTypes:[],spaces:[],sizes:[],colors:[],categories:[]},showMobileFilter:!1,products:[],loading:!1,imageLoaded:{},filters:{productTypes:[{id:"tile",name:"Gạch ốp lát"},{id:"sanitary",name:"Thiết bị vệ sinh"},{id:"decoration",name:"Gạch trang trí"}],spaces:[{id:"pn",name:"Phòng ngủ"},{id:"pk",name:"Phòng khách"},{id:"pt",name:"Phòng tắm"},{id:"pb",name:"Nhà bếp"},{id:"nt",name:"Ngoài trời"},{id:"tbvs",name:"Thiết bị vệ sinh"},{id:"kh",name:"Khác"}],sizes:[{id:"1000x1000",name:"1000 x 1000 mm"},{id:"1200x1200",name:"1200 x 1200 mm"},{id:"1200x2400",name:"1200 x 2400 mm"},{id:"150x600",name:"150 x 600 mm"},{id:"105x900",name:"105 x 900 mm"},{id:"1500x3000",name:"1500 x 3000 mm"},{id:"200x1000",name:"200 x 1000 mm"},{id:"200x1200",name:"200 x 1200 mm"},{id:"200x750",name:"200 x 750 mm"},{id:"230x1200",name:"230 x 1200 mm"},{id:"300x300",name:"300 x 300 mm"},{id:"300x600",name:"300 x 600 mm"},{id:"400x800",name:"400 x 800 mm"},{id:"450x900",name:"450 x 900 mm"},{id:"600x1200",name:"600 x 1200 mm"},{id:"600x600",name:"600 x 600 mm"},{id:"750x750",name:"750 x 750 mm"},{id:"800x1600",name:"800 x 1600 mm"},{id:"800x800",name:"800 x 800 mm"},{id:"900x1800",name:"900 x 1800 mm"},{id:"900x900",name:"900 x 900 mm"},{id:"315x1000",name:"315 x 1000 mm"},{id:"200x200",name:"200 x 200 mm"},{id:"300x900",name:"300 x 900 mm"},{id:"330x1000",name:"330 x 1000 mm"},{id:"750x1500",name:"750 x 1500 mm"}],colors:[{id:"white",code:"#ffffff"},{id:"black",code:"#000000"},{id:"gray",code:"#808080"},{id:"beige",code:"#f5f5dc"}],categories:[{id:"bathroom",name:"Thiết bị phòng tắm",expanded:!1,children:[{id:"bathroom-sink",name:"Bồn rửa mặt",expanded:!1,children:[{id:"wall-mounted-sink",name:"Bồn rửa mặt treo tường"},{id:"countertop-sink",name:"Bồn rửa mặt đặt bàn"},{id:"pedestal-sink",name:"Bồn rửa mặt có chân"}]},{id:"toilet",name:"Bồn cầu",expanded:!1,children:[{id:"one-piece-toilet",name:"Bồn cầu liền khối"},{id:"two-piece-toilet",name:"Bồn cầu rời"},{id:"wall-hung-toilet",name:"Bồn cầu treo tường"}]}]},{id:"tile",name:"Gạch ốp lát",expanded:!1,children:[{id:"wall-tile",name:"Gạch ốp tường",expanded:!1,children:[{id:"ceramic-wall",name:"Gạch ceramic ốp tường"},{id:"porcelain-wall",name:"Gạch porcelain ốp tường"}]},{id:"floor-tile",name:"Gạch lát nền",expanded:!1,children:[{id:"ceramic-floor",name:"Gạch ceramic lát nền"},{id:"porcelain-floor",name:"Gạch porcelain lát nền"}]}]}]}}},computed:{sortedProducts(){let r=[...this.products];switch(this.sortOption){case"name":r.sort((e,a)=>e.name.localeCompare(a.name));break;case"popular":break;default:r.sort((e,a)=>a.id-e.id)}return r},totalPages(){return Math.ceil(this.products.length/12)},visiblePages(){const r=[];if(this.totalPages<=5)for(let e=1;e<=this.totalPages;e++)r.push(e);else this.currentPage<=3?r.push(1,2,3,4,"...",this.totalPages):this.currentPage>=this.totalPages-2?r.push(1,"...",this.totalPages-3,this.totalPages-2,this.totalPages-1,this.totalPages):r.push(1,"...",this.currentPage-1,this.currentPage,this.currentPage+1,"...",this.totalPages);return r}},methods:{async loadProducts(){try{this.loading=!0,this.products=[],this.imageLoaded={};const e=(await M.post("/api/SearchhProduct/_Filter",{language:"vi",key:"",pageIndex:this.currentPage,pageSize:12,minPrice:this.priceRange[0],maxPrice:this.priceRange[1]},{params:{space:this.$route.query.space||"",size:this.$route.query.size||"",sort:this.sortOption}})).data.ListItems.map(a=>{const b=a.No_;return this.imageLoaded[b]=!1,{id:b,name:a.Name||"Gạch "+a.No_,itemCode:a.No_,image:`http://toppstiles.com.vn/products-test/hinh-gach/${a.No_}.jpg`,collectionName:a.Class||"Chưa phân loại",description:a.Description||""}});setTimeout(()=>{this.products=e,this.loading=!1},300)}catch(r){console.error("Error loading products:",r),this.products=[],this.loading=!1}},handleImageError(r,e){r.target.src="https://via.placeholder.com/300x300?text=No+Image",this.imageLoaded[e]=!0},handleImageLoad(r){var b;const e=r.target,a=e.getAttribute("data-product-id")||((b=e.closest(".card"))==null?void 0:b.getAttribute("data-product-id"));a&&(this.imageLoaded[a]=!0),e.style.width="100%",e.style.height="100%",e.style.objectFit="cover",e.style.objectPosition="center"},toggleColor(r){const e=this.selectedFilters.colors.indexOf(r);e===-1?this.selectedFilters.colors.push(r):this.selectedFilters.colors.splice(e,1)},applyFilters(){this.currentPage=1,this.loadProducts()},formatPrice(r){return new Intl.NumberFormat("vi-VN",{style:"currency",currency:"VND",maximumFractionDigits:0}).format(r)},updatePriceRange(){this.priceRange[0]>this.priceRange[1]&&(this.priceRange[0]=this.priceRange[1]),this.loadProducts()},toggleCategory(r){let e=this.filters.categories.find(a=>a.id===r);if(e){e.expanded=!e.expanded;return}for(let a of this.filters.categories)if(e=a.children.find(b=>b.id===r),e){e.expanded=!e.expanded;return}}},watch:{"$route.query":{handler(){this.loadProducts()},immediate:!0},currentPage(){this.loadProducts()},sortOption(){this.loadProducts()}}},G={class:"catalog"},j={class:"row g-0"},z={class:"col-3 d-none d-xxl-block"},D={class:"filters-section"},K={class:"filter-group mb-4"},O={class:"category-filter"},S=["onClick"],E=["id","value"],q=["for"],A={key:0,class:"category-level-2 ms-3"},H=["onClick"],X=["id","value"],Z=["for"],J={key:0,class:"category-level-3 ms-3"},Q=["id","value"],W=["for"],Y={class:"filter-group mb-4"},$=["id","value"],ee=["for"],se={class:"filter-group mb-4"},te=["id","value"],ie=["for"],oe={class:"filter-group mb-4"},le={class:"color-options"},ne=["onClick"],re={class:"filter-group mb-4"},de={class:"price-range-slider"},ae={class:"d-flex justify-content-between mb-2"},ce={class:"price-value"},me={class:"price-value"},ue={class:"range-slider"},ge={class:"col-12 col-xxl-9 px-3"},pe={class:"products-header d-flex justify-content-between align-items-center mb-4"},he={class:"results-count"},fe={key:0},be={key:1},ve={class:"sort-options"},xe={key:0,class:"row"},ke={key:1,class:"row g-3"},ye={class:"card h-100"},_e={class:"image-wrapper"},Pe=["alt","data-product-id","onError"],Ce={class:"image-loading-overlay"},Fe={class:"card-body"},we={class:"card-title"},Re={class:"card-text"},Ve={class:"mt-4"},Ne={class:"pagination justify-content-center custom-pagination"},Ue=["onClick"],Te={key:1,class:"page-link"},Be={key:0,class:"mobile-filter-overlay"},Ie={class:"mobile-filter-content"},Me={class:"filters-section"},Le={class:"filter-group mb-4"},Ge=["id","value"],je=["for"],ze={class:"filter-group mb-4"},De={class:"category-filter"},Ke=["onClick"],Oe=["id","value"],Se=["for"],Ee={key:0,class:"category-level-2 ms-3"},qe=["onClick"],Ae=["id","value"],He=["for"],Xe={key:0,class:"category-level-3 ms-3"},Ze=["id","value"],Je=["for"],Qe={class:"filter-group mb-4"},We=["id","value"],Ye=["for"],$e={class:"filter-group mb-4"},es=["id","value"],ss=["for"],ts={class:"filter-group mb-4"},is={class:"color-options"},os=["onClick"],ls={class:"filter-group mb-4"},ns={class:"price-range-slider"},rs={class:"d-flex justify-content-between mb-2"},ds={class:"price-value"},as={class:"price-value"},cs={class:"range-slider"};function ms(r,e,a,b,i,d){const C=R("router-link"),F=V("lazy");return l(),o("div",G,[s("div",j,[s("div",z,[s("div",D,[e[30]||(e[30]=s("h3",null,"Bộ lọc",-1)),s("div",K,[e[25]||(e[25]=s("h4",null,"Danh mục sản phẩm",-1)),s("div",O,[(l(!0),o(g,null,p(i.filters.categories,t=>(l(),o("div",{class:"category-level mb-2",key:t.id},[s("div",{class:"category-header",onClick:n=>d.toggleCategory(t.id)},[m(s("input",{type:"checkbox",id:"cat-"+t.id,"onUpdate:modelValue":e[0]||(e[0]=n=>i.selectedFilters.categories=n),value:t.id},null,8,E),[[h,i.selectedFilters.categories]]),s("label",{for:"cat-"+t.id},c(t.name),9,q),s("i",{class:f(["fi",t.expanded?"fi-br-angle-down":"fi-br-angle-right"])},null,2)],8,S),t.expanded?(l(),o("div",A,[(l(!0),o(g,null,p(t.children,n=>(l(),o("div",{class:"category-level mb-2",key:n.id},[s("div",{class:"category-header",onClick:u=>d.toggleCategory(n.id)},[m(s("input",{type:"checkbox",id:"cat-"+n.id,"onUpdate:modelValue":e[1]||(e[1]=u=>i.selectedFilters.categories=u),value:n.id},null,8,X),[[h,i.selectedFilters.categories]]),s("label",{for:"cat-"+n.id},c(n.name),9,Z),s("i",{class:f(["fi",n.expanded?"fi-br-angle-down":"fi-br-angle-right"])},null,2)],8,H),n.expanded?(l(),o("div",J,[(l(!0),o(g,null,p(n.children,u=>(l(),o("div",{class:"form-check",key:u.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:"cat-"+u.id,"onUpdate:modelValue":e[2]||(e[2]=k=>i.selectedFilters.categories=k),value:u.id},null,8,Q),[[h,i.selectedFilters.categories]]),s("label",{class:"form-check-label",for:"cat-"+u.id},c(u.name),9,W)]))),128))])):v("",!0)]))),128))])):v("",!0)]))),128))])]),s("div",Y,[e[26]||(e[26]=s("h4",null,"Không gian sử dụng",-1)),(l(!0),o(g,null,p(i.filters.spaces,t=>(l(),o("div",{class:"form-check",key:t.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:t.id,"onUpdate:modelValue":e[3]||(e[3]=n=>i.selectedFilters.spaces=n),value:t.id},null,8,$),[[h,i.selectedFilters.spaces]]),s("label",{class:"form-check-label",for:t.id},c(t.name),9,ee)]))),128))]),s("div",se,[e[27]||(e[27]=s("h4",null,"Kích thước",-1)),(l(!0),o(g,null,p(i.filters.sizes,t=>(l(),o("div",{class:"form-check",key:t.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:t.id,"onUpdate:modelValue":e[4]||(e[4]=n=>i.selectedFilters.sizes=n),value:t.id},null,8,te),[[h,i.selectedFilters.sizes]]),s("label",{class:"form-check-label",for:t.id},c(t.name),9,ie)]))),128))]),s("div",oe,[e[28]||(e[28]=s("h4",null,"Màu sắc",-1)),s("div",le,[(l(!0),o(g,null,p(i.filters.colors,t=>(l(),o("div",{key:t.id,class:f(["color-option",{active:i.selectedFilters.colors.includes(t.id)}]),style:_({backgroundColor:t.code}),onClick:n=>d.toggleColor(t.id)},null,14,ne))),128))])]),s("div",re,[e[29]||(e[29]=s("h4",null,"Khoảng giá",-1)),s("div",de,[s("div",ae,[s("span",ce,c(d.formatPrice(i.priceRange[0])),1),s("span",me,c(d.formatPrice(i.priceRange[1])),1)]),s("div",ue,[m(s("input",{type:"range",class:"form-range",min:"0",max:"2000000000",step:"1000000","onUpdate:modelValue":e[5]||(e[5]=t=>i.priceRange[0]=t),onInput:e[6]||(e[6]=(...t)=>d.updatePriceRange&&d.updatePriceRange(...t))},null,544),[[x,i.priceRange[0]]]),m(s("input",{type:"range",class:"form-range",min:"0",max:"2000000000",step:"1000000","onUpdate:modelValue":e[7]||(e[7]=t=>i.priceRange[1]=t),onInput:e[8]||(e[8]=(...t)=>d.updatePriceRange&&d.updatePriceRange(...t))},null,544),[[x,i.priceRange[1]]])])])])])]),s("div",ge,[s("button",{class:"btn btn-outline-secondary d-block d-xxl-none mb-3",onClick:e[9]||(e[9]=t=>i.showMobileFilter=!0)},e[31]||(e[31]=[s("img",{src:"https://cdn-icons-png.flaticon.com/128/7094/7094575.png",width:"20",height:"20",alt:"Filter",class:"me-2"},null,-1),P(" Bộ lọc ")])),s("div",pe,[s("div",he,[i.loading?(l(),o("div",fe,"Đang tải sản phẩm...")):(l(),o("div",be,"Hiển thị "+c(i.products.length)+" sản phẩm",1))]),s("div",ve,[m(s("select",{class:"form-select","onUpdate:modelValue":e[10]||(e[10]=t=>i.sortOption=t)},e[32]||(e[32]=[s("option",{value:"newest"},"Mới nhất",-1),s("option",{value:"name"},"Tên A-Z",-1),s("option",{value:"popular"},"Phổ biến nhất",-1)]),512),[[N,i.sortOption]])])]),i.loading?(l(),o("div",xe,[(l(),o(g,null,p(12,t=>s("div",{key:t,class:"col-md-3 mb-3 col-sm-6 col-6"},e[33]||(e[33]=[U('<div class="card h-100 skeleton-card" data-v-c09709ef><div class="skeleton-img" data-v-c09709ef></div><div class="card-body" data-v-c09709ef><div class="skeleton-title" data-v-c09709ef></div><div class="skeleton-text" data-v-c09709ef></div><div class="skeleton-button" data-v-c09709ef></div></div></div>',1)]))),64))])):(l(),o("div",ke,[(l(!0),o(g,null,p(d.sortedProducts,t=>(l(),o("div",{key:t.id,class:"col-6 col-md-4 col-lg-3 col-xxl-3"},[s("div",ye,[s("div",_e,[m(s("img",{class:"card-img-top main-img",alt:t.name,"data-product-id":t.id,onError:n=>d.handleImageError(n,t.id),onLoad:e[11]||(e[11]=n=>d.handleImageLoad(n)),loading:"lazy"},null,40,Pe),[[F,t.image]]),m(s("div",Ce,e[34]||(e[34]=[s("div",{class:"spinner-border spinner-border-sm text-primary"},null,-1)]),512),[[T,!i.imageLoaded[t.id]]])]),s("div",Fe,[s("h5",we,c(t.name),1),s("p",Re,"Mã: "+c(t.itemCode),1),B(C,{to:"/san-pham/"+t.id,class:"btn btn-primary"},{default:I(()=>e[35]||(e[35]=[P(" Xem chi tiết ")])),_:2},1032,["to"])])])]))),128))])),s("nav",Ve,[s("ul",Ne,[s("li",{class:f(["page-item",{disabled:i.currentPage===1}])},[s("a",{class:"page-link",href:"#",onClick:e[12]||(e[12]=y(t=>r.goToPage(i.currentPage-1),["prevent"]))},e[36]||(e[36]=[s("i",{class:"fi fi-br-angle-left"},null,-1)]))],2),(l(!0),o(g,null,p(d.visiblePages,t=>(l(),o("li",{key:t,class:f(["page-item",{active:i.currentPage===t,ellipsis:t==="..."}])},[t!=="..."?(l(),o("a",{key:0,class:"page-link",href:"#",onClick:y(n=>r.goToPage(t),["prevent"])},c(t),9,Ue)):(l(),o("span",Te,"..."))],2))),128)),s("li",{class:f(["page-item",{disabled:i.currentPage===d.totalPages}])},[s("a",{class:"page-link",href:"#",onClick:e[13]||(e[13]=y(t=>r.goToPage(i.currentPage+1),["prevent"]))},e[37]||(e[37]=[s("i",{class:"fi fi-br-angle-right"},null,-1)]))],2)])])])]),i.showMobileFilter?(l(),o("div",Be,[s("div",Ie,[s("button",{class:"btn btn-danger mb-3",onClick:e[14]||(e[14]=t=>i.showMobileFilter=!1)},"Đóng"),s("div",Me,[e[44]||(e[44]=s("h3",null,"Bộ lọc",-1)),s("div",Le,[e[38]||(e[38]=s("h4",null,"Loại sản phẩm",-1)),(l(!0),o(g,null,p(i.filters.productTypes,t=>(l(),o("div",{class:"form-check",key:t.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:"mobile-"+t.id,"onUpdate:modelValue":e[15]||(e[15]=n=>i.selectedFilters.productTypes=n),value:t.id},null,8,Ge),[[h,i.selectedFilters.productTypes]]),s("label",{class:"form-check-label",for:"mobile-"+t.id},c(t.name),9,je)]))),128))]),s("div",ze,[e[39]||(e[39]=s("h4",null,"Danh mục sản phẩm",-1)),s("div",De,[(l(!0),o(g,null,p(i.filters.categories,t=>(l(),o("div",{class:"category-level mb-2",key:t.id},[s("div",{class:"category-header",onClick:n=>d.toggleCategory(t.id)},[m(s("input",{type:"checkbox",id:"mobile-cat-"+t.id,"onUpdate:modelValue":e[16]||(e[16]=n=>i.selectedFilters.categories=n),value:t.id},null,8,Oe),[[h,i.selectedFilters.categories]]),s("label",{for:"mobile-cat-"+t.id},c(t.name),9,Se),s("i",{class:f(["fi",t.expanded?"fi-br-angle-down":"fi-br-angle-right"])},null,2)],8,Ke),t.expanded?(l(),o("div",Ee,[(l(!0),o(g,null,p(t.children,n=>(l(),o("div",{class:"category-level mb-2",key:n.id},[s("div",{class:"category-header",onClick:u=>d.toggleCategory(n.id)},[m(s("input",{type:"checkbox",id:"mobile-cat-"+n.id,"onUpdate:modelValue":e[17]||(e[17]=u=>i.selectedFilters.categories=u),value:n.id},null,8,Ae),[[h,i.selectedFilters.categories]]),s("label",{for:"mobile-cat-"+n.id},c(n.name),9,He),s("i",{class:f(["fi",n.expanded?"fi-br-angle-down":"fi-br-angle-right"])},null,2)],8,qe),n.expanded?(l(),o("div",Xe,[(l(!0),o(g,null,p(n.children,u=>(l(),o("div",{class:"form-check",key:u.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:"mobile-cat-"+u.id,"onUpdate:modelValue":e[18]||(e[18]=k=>i.selectedFilters.categories=k),value:u.id},null,8,Ze),[[h,i.selectedFilters.categories]]),s("label",{class:"form-check-label",for:"mobile-cat-"+u.id},c(u.name),9,Je)]))),128))])):v("",!0)]))),128))])):v("",!0)]))),128))])]),s("div",Qe,[e[40]||(e[40]=s("h4",null,"Không gian sử dụng",-1)),(l(!0),o(g,null,p(i.filters.spaces,t=>(l(),o("div",{class:"form-check",key:t.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:"mobile-"+t.id,"onUpdate:modelValue":e[19]||(e[19]=n=>i.selectedFilters.spaces=n),value:t.id},null,8,We),[[h,i.selectedFilters.spaces]]),s("label",{class:"form-check-label",for:"mobile-"+t.id},c(t.name),9,Ye)]))),128))]),s("div",$e,[e[41]||(e[41]=s("h4",null,"Kích thước",-1)),(l(!0),o(g,null,p(i.filters.sizes,t=>(l(),o("div",{class:"form-check",key:t.id},[m(s("input",{class:"form-check-input",type:"checkbox",id:"mobile-"+t.id,"onUpdate:modelValue":e[20]||(e[20]=n=>i.selectedFilters.sizes=n),value:t.id},null,8,es),[[h,i.selectedFilters.sizes]]),s("label",{class:"form-check-label",for:"mobile-"+t.id},c(t.name),9,ss)]))),128))]),s("div",ts,[e[42]||(e[42]=s("h4",null,"Màu sắc",-1)),s("div",is,[(l(!0),o(g,null,p(i.filters.colors,t=>(l(),o("div",{key:t.id,class:f(["color-option",{active:i.selectedFilters.colors.includes(t.id)}]),style:_({backgroundColor:t.code}),onClick:n=>d.toggleColor(t.id)},null,14,os))),128))])]),s("div",ls,[e[43]||(e[43]=s("h4",null,"Khoảng giá",-1)),s("div",ns,[s("div",rs,[s("span",ds,c(d.formatPrice(i.priceRange[0])),1),s("span",as,c(d.formatPrice(i.priceRange[1])),1)]),s("div",cs,[m(s("input",{type:"range",class:"form-range",min:"0",max:"2000000000",step:"1000000","onUpdate:modelValue":e[21]||(e[21]=t=>i.priceRange[0]=t),onInput:e[22]||(e[22]=(...t)=>d.updatePriceRange&&d.updatePriceRange(...t))},null,544),[[x,i.priceRange[0]]]),m(s("input",{type:"range",class:"form-range",min:"0",max:"2000000000",step:"1000000","onUpdate:modelValue":e[23]||(e[23]=t=>i.priceRange[1]=t),onInput:e[24]||(e[24]=(...t)=>d.updatePriceRange&&d.updatePriceRange(...t))},null,544),[[x,i.priceRange[1]]])])])])])])])):v("",!0)])}const gs=w(L,[["render",ms],["__scopeId","data-v-c09709ef"]]);export{gs as default};
